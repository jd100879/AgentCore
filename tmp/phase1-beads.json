{
  "ok": true,
  "raw_text": "JSON\n[\n  {\n    \"title\": \"Create agentcore directory skeleton\",\n    \"priority\": \"P0\",\n    \"depends_on\": [],\n    \"description\": \"## How to Think\\nThis is foundation work. The intent is an additive-only migration scaffold: create the canonical lowercase `agentcore/` structure without moving or deleting any existing coordination assets (except the confirmed-unused `AgentCore/`). Preserve current behavior by ensuring nothing in the existing codebase starts depending on `agentcore/` yet. Stop and escalate if any target paths already exist with unexpected contents or if directory creation conflicts with permissions/ownership.\\n\\n## Acceptance Criteria\\n- `agentcore/` exists at repo root with all agreed subdirectories.\\n- No existing files are moved in this bead.\\n- No hidden (dot) directories are created under `agentcore/`.\\n\\n## Files to Create\\n- agentcore/\\n- agentcore/config/\\n- agentcore/config/flywheel/\\n- agentcore/config/agents/\\n- agentcore/config/ntm/\\n- agentcore/schemas/\\n- agentcore/state/\\n- agentcore/state/beads/\\n- agentcore/state/notifications/\\n- agentcore/state/audit/\\n- agentcore/runtime/\\n- agentcore/runtime/pids/\\n- agentcore/runtime/panes/\\n- agentcore/runtime/sessions/\\n- agentcore/runtime/logs/\\n- agentcore/runtime/tmp/\\n- agentcore/coordination/\\n- agentcore/coordination/profiles/\\n- agentcore/coordination/workflows/\\n- agentcore/coordination/active/\\n- agentcore/mail/\\n- agentcore/mail/tools/\\n- agentcore/tools/\\n- agentcore/tools/lib/\\n- agentcore/verify/\\n- agentcore/verify/checks/\\n\\n## Files to Modify\\n- None\\n\\n## Verification\\n- Command: `find agentcore -maxdepth 3 -type d | sort`\\n- Must be true afterward: the output includes all directories listed above and contains no paths with `/.` under `agentcore` (no dot-directories).\"\n  },\n  {\n    \"title\": \"Create agentcore README with invariants and scope\",\n    \"priority\": \"P1\",\n    \"depends_on\": [],\n    \"description\": \"## How to Think\\nThis is clarity work. The intent is to prevent drift by documenting hard invariants early: agentcore is coordination infrastructure only; peer components remain at top-level; no hidden dirs inside agentcore; mail is shared and external by design. Preserve accuracy over completeness—document what is true now and the intended end-state. Stop and escalate if the doc would require guessing about behavior that hasn’t been verified in the codebase.\\n\\n## Acceptance Criteria\\n- `agentcore/README.md` exists and clearly states:\\n  - scope: coordination plane only\\n  - invariants: no hidden dirs inside agentcore\\n  - hub-and-spoke: peer components remain top-level\\n  - mail: shared external repo + MCP server on 8765\\n  - Phase 1 posture: additive-only, outward symlinks\\n\\n## Files to Create\\n- agentcore/README.md\\n\\n## Files to Modify\\n- None\\n\\n## Verification\\n- Command: `test -f agentcore/README.md && sed -n '1,200p' agentcore/README.md`\\n- Must be true afterward: the file exists and includes explicit sections for Scope, Invariants, Mail (Shared), and Migration Phases.\"\n  },\n  {\n    \"title\": \"Add mail configuration file for shared infrastructure\",\n    \"priority\": \"P1\",\n    \"depends_on\": [\n      \"bd-PH1-001\"\n    ],\n    \"description\": \"## How to Think\\nThis is configuration formalization. The intent is to make the shared mail dependency explicit without relocating it. Preserve the hub model: mail repo remains external at `${HOME}/.mcp_agent_mail_local_repo` and MCP server stays on port 8765. Stop and escalate if any existing scripts already parse a different mail config format or if introducing this file would create conflicting sources of truth.\\n\\n## Acceptance Criteria\\n- `agentcore/config/mail.yaml` exists with `mail_repo_path` and `mcp_server_port`.\\n- Uses `${HOME}` (not `$HOME`) to avoid YAML ambiguity.\\n\\n## Files to Create\\n- agentcore/config/mail.yaml\\n\\n## Files to Modify\\n- None\\n\\n## Verification\\n- Command: `cat agentcore/config/mail.yaml`\\n- Must be true afterward: file contains:\\n  - `mail_repo_path: ${HOME}/.mcp_agent_mail_local_repo`\\n  - `mcp_server_port: 8765`\"\n  },\n  {\n    \"title\": \"Create outward symlink for beads state view\",\n    \"priority\": \"P0\",\n    \"depends_on\": [\n      \"bd-PH1-001\"\n    ],\n    \"description\": \"## How to Think\\nThis is migration scaffolding. The intent is to mirror existing authoritative state into `agentcore/` without changing any current behavior. Preserve all existing `.beads/` consumers: do not modify `.beads/` and do not move any files. Stop and escalate if `.beads/` does not exist, is not a directory, or if the symlink target would mask real data under `agentcore/state/beads`.\\n\\n## Acceptance Criteria\\n- `agentcore/state/beads` is a symlink pointing to `../../.beads` (or equivalent correct relative path).\\n- No changes to `.beads/`.\\n\\n## Files to Create\\n- agentcore/state/beads (symlink)\\n\\n## Files to Modify\\n- None\\n\\n## Verification\\n- Command: `ls -la agentcore/state | sed -n '1,50p' && readlink agentcore/state/beads`\\n- Must be true afterward: `agentcore/state/beads` is a symlink and resolves to the existing `.beads` directory.\"\n  },\n  {\n    \"title\": \"Create outward symlink for flywheel config view\",\n    \"priority\": \"P0\",\n    \"depends_on\": [\n      \"bd-PH1-001\"\n    ],\n    \"description\": \"## How to Think\\nThis is migration scaffolding. The intent is to provide a canonical view of Flywheel config under `agentcore/config/flywheel` while preserving all existing `.flywheel/` consumers. Do not move or rewrite any Flywheel config. Stop and escalate if `.flywheel/` is missing or if the target path under agentcore already contains real files.\\n\\n## Acceptance Criteria\\n- `agentcore/config/flywheel` is a symlink to `../../.flywheel` (or correct relative path).\\n- Existing `.flywheel/` remains untouched.\\n\\n## Files to Create\\n- agentcore/config/flywheel (symlink)\\n\\n## Files to Modify\\n- None\\n\\n## Verification\\n- Command: `ls -la agentcore/config && readlink agentcore/config/flywheel && ls -la agentcore/config/flywheel | head`\\n- Must be true afterward: symlink resolves correctly and shows expected Flywheel files (e.g., chatgpt.json if present).\"\n  },\n  {\n    \"title\": \"Create outward symlinks for agent coordination dotdirs\",\n    \"priority\": \"P0\",\n    \"depends_on\": [\n      \"bd-PH1-001\"\n    ],\n    \"description\": \"## How to Think\\nThis is control-plane mirroring. The intent is to mirror current authoritative coordination dotdirs into explicit `agentcore/coordination/*` locations without changing runtime behavior. Preserve all scripts that reference `.agent-*` paths by not touching the dotdirs. Stop and escalate if any of the dotdirs are missing in an unexpected way, or if symlink targets conflict with real directories already created under agentcore.\\n\\n## Acceptance Criteria\\n- `agentcore/coordination/profiles` links to `../../.agent-profiles`\\n- `agentcore/coordination/workflows` links to `../../.agent-workflows`\\n- `agentcore/coordination/active` links to `../../.active-agents`\\n- `agentcore/runtime/sessions` links to `../../.session-state`\\n\\n## Files to Create\\n- agentcore/coordination/profiles (symlink)\\n- agentcore/coordination/workflows (symlink)\\n- agentcore/coordination/active (symlink)\\n- agentcore/runtime/sessions (symlink)\\n\\n## Files to Modify\\n- None\\n\\n## Verification\\n- Command: `for p in agentcore/coordination/profiles agentcore/coordination/workflows agentcore/coordination/active agentcore/runtime/sessions; do echo \\\"== $p\\\"; ls -la \\\"$p\\\" | head -n 3; readlink \\\"$p\\\"; done`\\n- Must be true afterward: each path is a symlink and resolves to the expected existing dotdir.\"\n  },\n  {\n    \"title\": \"Create outward symlinks for runtime directories view\",\n    \"priority\": \"P0\",\n    \"depends_on\": [\n      \"bd-PH1-001\"\n    ],\n    \"description\": \"## How to Think\\nThis is runtime mirroring. The intent is to create an explicit view of existing runtime directories (pids/panes/tmp/state/logs) under `agentcore/runtime/*` without changing where the system writes today. Preserve current running sessions by not moving any runtime directories. Stop and escalate if any runtime directories are missing or if a directory is a symlink already and could create a symlink loop.\\n\\n## Acceptance Criteria\\n- `agentcore/runtime/pids` links to `../../pids` (if `pids/` exists)\\n- `agentcore/runtime/panes` links to `../../panes` (if `panes/` exists)\\n- `agentcore/runtime/tmp` links to `../../tmp` (if `tmp/` exists)\\n- `agentcore/runtime/logs` links to `../../state/logs` (if `state/logs/` exists)\\n\\n## Files to Create\\n- agentcore/runtime/pids (symlink)\\n- agentcore/runtime/panes (symlink)\\n- agentcore/runtime/tmp (symlink)\\n- agentcore/runtime/logs (symlink)\\n\\n## Files to Modify\\n- None\\n\\n## Verification\\n- Command: `for p in agentcore/runtime/pids agentcore/runtime/panes agentcore/runtime/tmp agentcore/runtime/logs; do echo \\\"== $p\\\"; if [ -e \\\"$p\\\" ]; then ls -la \\\"$p\\\" | head -n 3; readlink \\\"$p\\\"; else echo \\\"MISSING\\\"; fi; done`\\n- Must be true afterward: each created path is a symlink and resolves to the expected existing runtime directory.\"\n  },\n  {\n    \"title\": \"Create agentcore mail repo pointer and optional symlink\",\n    \"priority\": \"P0\",\n    \"depends_on\": [\n      \"bd-PH1-001\",\n      \"bd-PH1-003\"\n    ],\n    \"description\": \"## How to Think\\nThis is shared-infrastructure hygiene. The intent is to acknowledge mail storage is workspace-global by design. Preserve the existing external repo location and do not relocate data. Create an explicit pointer file as the source of truth, and optionally add a convenience symlink if it does not cause confusion. Stop and escalate if the external repo path does not exist or is not accessible; do not create or initialize it in this bead unless explicitly instructed.\\n\\n## Acceptance Criteria\\n- `agentcore/mail/repo-location.txt` exists and contains `${HOME}/.mcp_agent_mail_local_repo` (or the resolved absolute path if preferred).\\n- If creating the symlink, `agentcore/mail/repo` points to `$HOME/.mcp_agent_mail_local_repo`.\\n- No changes to the external mail repo.\\n\\n## Files to Create\\n- agentcore/mail/repo-location.txt\\n- agentcore/mail/repo (symlink, optional but recommended)\\n\\n## Files to Modify\\n- None\\n\\n## Verification\\n- Command: `cat agentcore/mail/repo-location.txt && ( [ -L agentcore/mail/repo ] && readlink agentcore/mail/repo || echo \\\"repo symlink not created\\\" ) && ls -la \\\"$HOME/.mcp_agent_mail_local_repo\\\" | head`\\n- Must be true afterward: pointer file exists; if symlink exists it resolves to the external repo; external repo is readable.\"\n  },\n  {\n    \"title\": \"Create agentcore tools aliases for coordination scripts\",\n    \"priority\": \"P0\",\n    \"depends_on\": [\n      \"bd-PH1-001\"\n    ],\n    \"description\": \"## How to Think\\nThis is boundary-setting without disruption. The intent is to establish `agentcore/tools/*` as the canonical coordination-script entrypoints while keeping the real scripts in `scripts/` for Phase 1. Preserve all existing invocations by not moving the originals. Stop and escalate if any of the referenced scripts do not exist or if creating the alias would overwrite a real file.\\n\\n## Acceptance Criteria\\n- `agentcore/tools/agent-mail-helper.sh` symlinks to `../../scripts/agent-mail-helper.sh`\\n- `agentcore/tools/agent-registry.sh` symlinks to `../../scripts/agent-registry.sh`\\n- `agentcore/tools/auto-register-agent.sh` symlinks to `../../scripts/auto-register-agent.sh`\\n- `agentcore/tools/monitor-agent-mail-to-terminal.sh` symlinks to `../../scripts/monitor-agent-mail-to-terminal.sh`\\n- `agentcore/tools/mail-monitor-ctl.sh` symlinks to `../../scripts/mail-monitor-ctl.sh`\\n\\n## Files to Create\\n- agentcore/tools/agent-mail-helper.sh (symlink)\\n- agentcore/tools/agent-registry.sh (symlink)\\n- agentcore/tools/auto-register-agent.sh (symlink)\\n- agentcore/tools/monitor-agent-mail-to-terminal.sh (symlink)\\n- agentcore/tools/mail-monitor-ctl.sh (symlink)\\n\\n## Files to Modify\\n- None\\n\\n## Verification\\n- Command: `for s in agent-mail-helper.sh agent-registry.sh auto-register-agent.sh monitor-agent-mail-to-terminal.sh mail-monitor-ctl.sh; do echo \\\"== $s\\\"; ls -la \\\"agentcore/tools/$s\\\"; readlink \\\"agentcore/tools/$s\\\"; done`\\n- Must be true afterward: each alias exists as a symlink pointing to the corresponding file under `scripts/`.\"\n  },\n  {\n    \"title\": \"Implement Phase 1 verification script suite\",\n    \"priority\": \"P1\",\n    \"depends_on\": [\n      \"bd-PH1-001\",\n      \"bd-PH1-004\",\n      \"bd-PH1-005\",\n      \"bd-PH1-006\",\n      \"bd-PH1-007\",\n      \"bd-PH1-008\",\n      \"bd-PH1-009\"\n    ],\n    \"description\": \"## How to Think\\nThis is the safety net. The intent is defensive verification: assume nothing, verify everything. The scripts should confirm (1) directory skeleton exists, (2) no hidden dirs inside agentcore, (3) required symlinks exist and resolve correctly, (4) external mail repo is reachable, and (5) no symlink loops. Preserve non-disruption: verification must be read-only (no writes except to its own temp output). Stop and escalate if verification reveals mismatches or missing dependencies; do not auto-fix in this bead.\\n\\n## Acceptance Criteria\\n- `agentcore/verify/verify-phase1.sh` exists and exits non-zero on failure.\\n- Script checks:\\n  - no dot-directories under agentcore\\n  - expected symlinks exist and resolve\\n  - external mail repo path readable\\n  - agentcore/tools aliases exist\\n- Output is human-readable and indicates PASS/FAIL per check.\\n\\n## Files to Create\\n- agentcore/verify/verify-phase1.sh\\n- agentcore/verify/checks/check-no-dotdirs.sh\\n- agentcore/verify/checks/check-symlinks.sh\\n- agentcore/verify/checks/check-mail-repo.sh\\n\\n## Files to Modify\\n- None\\n\\n## Verification\\n- Command: `bash agentcore/verify/verify-phase1.sh`\\n- Must be true afterward: script runs to completion and reports PASS for all checks on a correctly set up Phase 1 environment.\"\n  },\n  {\n    \"title\": \"Delete unused capital AgentCore directory\",\n    \"priority\": \"P0\",\n    \"depends_on\": [],\n    \"description\": \"## How to Think\\nThis is controlled cleanup. The intent is to remove confirmed-unused legacy clutter (`AgentCore/` with capital A) to reduce ambiguity. Preserve safety: only delete after re-verifying it is not referenced by scripts/build tooling and is not needed for git attributes. Stop and escalate if `.gitattributes` inside `AgentCore/` contains rules not present elsewhere or if any tooling references the path.\\n\\n## Acceptance Criteria\\n- `AgentCore/` directory is removed from repo.\\n- If it contained `.gitattributes`, either:\\n  - it is safely removed because redundant, OR\\n  - its rules are migrated to the correct repo-root `.gitattributes` before deletion.\\n\\n## Files to Create\\n- None\\n\\n## Files to Modify\\n- .gitattributes (only if needed to preserve rules)\\n\\n## Verification\\n- Command: `test ! -d AgentCore && echo \\\"AgentCore/ removed\\\"; rg -n \\\"\\\\bAgentCore/\\\\b\\\" -S . || true`\\n- Must be true afterward: `AgentCore/` does not exist and ripgrep finds no references in the codebase.\"\n  },\n  {\n    \"title\": \"Run Phase 1 smoke tests and record results\",\n    \"priority\": \"P1\",\n    \"depends_on\": [\n      \"bd-PH1-010\",\n      \"bd-PH1-009\"\n    ],\n    \"description\": \"## How to Think\\nThis is end-to-end validation. The intent is to prove Phase 1 is non-disruptive: existing tooling still works, and the new agentcore view doesn’t introduce regressions. Preserve current behavior: do not change scripts; only execute them. Stop and escalate if any smoke test fails; capture exact command output and environment details so failures are actionable.\\n\\n## Acceptance Criteria\\n- Phase 1 verification script passes.\\n- Mail helper basic commands work (whoami/list/inbox), and sending a test message works if a safe recipient is available.\\n- Beads tooling still works (`br` and/or `bv` commands as used in this repo).\\n- Results are recorded in a short log file under `agentcore/verify/`.\\n\\n## Files to Create\\n- agentcore/verify/phase1-smoke-results.txt\\n\\n## Files to Modify\\n- None\\n\\n## Verification\\n- Commands:\\n  - `bash agentcore/verify/verify-phase1.sh`\\n  - `bash scripts/agent-mail-helper.sh whoami`\\n  - `bash scripts/agent-mail-helper.sh list || true`\\n  - `br list || true`\\n  - `bv list || true`\\n- Must be true afterward: verification passes; core commands execute without path-related errors; results file exists and includes timestamps and command outputs.\"\n  }\n]",
  "parse_ok": true,
  "extracted_json": [
    {
      "title": "Create agentcore directory skeleton",
      "priority": "P0",
      "depends_on": [],
      "description": "## How to Think\nThis is foundation work. The intent is an additive-only migration scaffold: create the canonical lowercase `agentcore/` structure without moving or deleting any existing coordination assets (except the confirmed-unused `AgentCore/`). Preserve current behavior by ensuring nothing in the existing codebase starts depending on `agentcore/` yet. Stop and escalate if any target paths already exist with unexpected contents or if directory creation conflicts with permissions/ownership.\n\n## Acceptance Criteria\n- `agentcore/` exists at repo root with all agreed subdirectories.\n- No existing files are moved in this bead.\n- No hidden (dot) directories are created under `agentcore/`.\n\n## Files to Create\n- agentcore/\n- agentcore/config/\n- agentcore/config/flywheel/\n- agentcore/config/agents/\n- agentcore/config/ntm/\n- agentcore/schemas/\n- agentcore/state/\n- agentcore/state/beads/\n- agentcore/state/notifications/\n- agentcore/state/audit/\n- agentcore/runtime/\n- agentcore/runtime/pids/\n- agentcore/runtime/panes/\n- agentcore/runtime/sessions/\n- agentcore/runtime/logs/\n- agentcore/runtime/tmp/\n- agentcore/coordination/\n- agentcore/coordination/profiles/\n- agentcore/coordination/workflows/\n- agentcore/coordination/active/\n- agentcore/mail/\n- agentcore/mail/tools/\n- agentcore/tools/\n- agentcore/tools/lib/\n- agentcore/verify/\n- agentcore/verify/checks/\n\n## Files to Modify\n- None\n\n## Verification\n- Command: `find agentcore -maxdepth 3 -type d | sort`\n- Must be true afterward: the output includes all directories listed above and contains no paths with `/.` under `agentcore` (no dot-directories)."
    },
    {
      "title": "Create agentcore README with invariants and scope",
      "priority": "P1",
      "depends_on": [],
      "description": "## How to Think\nThis is clarity work. The intent is to prevent drift by documenting hard invariants early: agentcore is coordination infrastructure only; peer components remain at top-level; no hidden dirs inside agentcore; mail is shared and external by design. Preserve accuracy over completeness—document what is true now and the intended end-state. Stop and escalate if the doc would require guessing about behavior that hasn’t been verified in the codebase.\n\n## Acceptance Criteria\n- `agentcore/README.md` exists and clearly states:\n  - scope: coordination plane only\n  - invariants: no hidden dirs inside agentcore\n  - hub-and-spoke: peer components remain top-level\n  - mail: shared external repo + MCP server on 8765\n  - Phase 1 posture: additive-only, outward symlinks\n\n## Files to Create\n- agentcore/README.md\n\n## Files to Modify\n- None\n\n## Verification\n- Command: `test -f agentcore/README.md && sed -n '1,200p' agentcore/README.md`\n- Must be true afterward: the file exists and includes explicit sections for Scope, Invariants, Mail (Shared), and Migration Phases."
    },
    {
      "title": "Add mail configuration file for shared infrastructure",
      "priority": "P1",
      "depends_on": [
        "bd-PH1-001"
      ],
      "description": "## How to Think\nThis is configuration formalization. The intent is to make the shared mail dependency explicit without relocating it. Preserve the hub model: mail repo remains external at `${HOME}/.mcp_agent_mail_local_repo` and MCP server stays on port 8765. Stop and escalate if any existing scripts already parse a different mail config format or if introducing this file would create conflicting sources of truth.\n\n## Acceptance Criteria\n- `agentcore/config/mail.yaml` exists with `mail_repo_path` and `mcp_server_port`.\n- Uses `${HOME}` (not `$HOME`) to avoid YAML ambiguity.\n\n## Files to Create\n- agentcore/config/mail.yaml\n\n## Files to Modify\n- None\n\n## Verification\n- Command: `cat agentcore/config/mail.yaml`\n- Must be true afterward: file contains:\n  - `mail_repo_path: ${HOME}/.mcp_agent_mail_local_repo`\n  - `mcp_server_port: 8765`"
    },
    {
      "title": "Create outward symlink for beads state view",
      "priority": "P0",
      "depends_on": [
        "bd-PH1-001"
      ],
      "description": "## How to Think\nThis is migration scaffolding. The intent is to mirror existing authoritative state into `agentcore/` without changing any current behavior. Preserve all existing `.beads/` consumers: do not modify `.beads/` and do not move any files. Stop and escalate if `.beads/` does not exist, is not a directory, or if the symlink target would mask real data under `agentcore/state/beads`.\n\n## Acceptance Criteria\n- `agentcore/state/beads` is a symlink pointing to `../../.beads` (or equivalent correct relative path).\n- No changes to `.beads/`.\n\n## Files to Create\n- agentcore/state/beads (symlink)\n\n## Files to Modify\n- None\n\n## Verification\n- Command: `ls -la agentcore/state | sed -n '1,50p' && readlink agentcore/state/beads`\n- Must be true afterward: `agentcore/state/beads` is a symlink and resolves to the existing `.beads` directory."
    },
    {
      "title": "Create outward symlink for flywheel config view",
      "priority": "P0",
      "depends_on": [
        "bd-PH1-001"
      ],
      "description": "## How to Think\nThis is migration scaffolding. The intent is to provide a canonical view of Flywheel config under `agentcore/config/flywheel` while preserving all existing `.flywheel/` consumers. Do not move or rewrite any Flywheel config. Stop and escalate if `.flywheel/` is missing or if the target path under agentcore already contains real files.\n\n## Acceptance Criteria\n- `agentcore/config/flywheel` is a symlink to `../../.flywheel` (or correct relative path).\n- Existing `.flywheel/` remains untouched.\n\n## Files to Create\n- agentcore/config/flywheel (symlink)\n\n## Files to Modify\n- None\n\n## Verification\n- Command: `ls -la agentcore/config && readlink agentcore/config/flywheel && ls -la agentcore/config/flywheel | head`\n- Must be true afterward: symlink resolves correctly and shows expected Flywheel files (e.g., chatgpt.json if present)."
    },
    {
      "title": "Create outward symlinks for agent coordination dotdirs",
      "priority": "P0",
      "depends_on": [
        "bd-PH1-001"
      ],
      "description": "## How to Think\nThis is control-plane mirroring. The intent is to mirror current authoritative coordination dotdirs into explicit `agentcore/coordination/*` locations without changing runtime behavior. Preserve all scripts that reference `.agent-*` paths by not touching the dotdirs. Stop and escalate if any of the dotdirs are missing in an unexpected way, or if symlink targets conflict with real directories already created under agentcore.\n\n## Acceptance Criteria\n- `agentcore/coordination/profiles` links to `../../.agent-profiles`\n- `agentcore/coordination/workflows` links to `../../.agent-workflows`\n- `agentcore/coordination/active` links to `../../.active-agents`\n- `agentcore/runtime/sessions` links to `../../.session-state`\n\n## Files to Create\n- agentcore/coordination/profiles (symlink)\n- agentcore/coordination/workflows (symlink)\n- agentcore/coordination/active (symlink)\n- agentcore/runtime/sessions (symlink)\n\n## Files to Modify\n- None\n\n## Verification\n- Command: `for p in agentcore/coordination/profiles agentcore/coordination/workflows agentcore/coordination/active agentcore/runtime/sessions; do echo \"== $p\"; ls -la \"$p\" | head -n 3; readlink \"$p\"; done`\n- Must be true afterward: each path is a symlink and resolves to the expected existing dotdir."
    },
    {
      "title": "Create outward symlinks for runtime directories view",
      "priority": "P0",
      "depends_on": [
        "bd-PH1-001"
      ],
      "description": "## How to Think\nThis is runtime mirroring. The intent is to create an explicit view of existing runtime directories (pids/panes/tmp/state/logs) under `agentcore/runtime/*` without changing where the system writes today. Preserve current running sessions by not moving any runtime directories. Stop and escalate if any runtime directories are missing or if a directory is a symlink already and could create a symlink loop.\n\n## Acceptance Criteria\n- `agentcore/runtime/pids` links to `../../pids` (if `pids/` exists)\n- `agentcore/runtime/panes` links to `../../panes` (if `panes/` exists)\n- `agentcore/runtime/tmp` links to `../../tmp` (if `tmp/` exists)\n- `agentcore/runtime/logs` links to `../../state/logs` (if `state/logs/` exists)\n\n## Files to Create\n- agentcore/runtime/pids (symlink)\n- agentcore/runtime/panes (symlink)\n- agentcore/runtime/tmp (symlink)\n- agentcore/runtime/logs (symlink)\n\n## Files to Modify\n- None\n\n## Verification\n- Command: `for p in agentcore/runtime/pids agentcore/runtime/panes agentcore/runtime/tmp agentcore/runtime/logs; do echo \"== $p\"; if [ -e \"$p\" ]; then ls -la \"$p\" | head -n 3; readlink \"$p\"; else echo \"MISSING\"; fi; done`\n- Must be true afterward: each created path is a symlink and resolves to the expected existing runtime directory."
    },
    {
      "title": "Create agentcore mail repo pointer and optional symlink",
      "priority": "P0",
      "depends_on": [
        "bd-PH1-001",
        "bd-PH1-003"
      ],
      "description": "## How to Think\nThis is shared-infrastructure hygiene. The intent is to acknowledge mail storage is workspace-global by design. Preserve the existing external repo location and do not relocate data. Create an explicit pointer file as the source of truth, and optionally add a convenience symlink if it does not cause confusion. Stop and escalate if the external repo path does not exist or is not accessible; do not create or initialize it in this bead unless explicitly instructed.\n\n## Acceptance Criteria\n- `agentcore/mail/repo-location.txt` exists and contains `${HOME}/.mcp_agent_mail_local_repo` (or the resolved absolute path if preferred).\n- If creating the symlink, `agentcore/mail/repo` points to `$HOME/.mcp_agent_mail_local_repo`.\n- No changes to the external mail repo.\n\n## Files to Create\n- agentcore/mail/repo-location.txt\n- agentcore/mail/repo (symlink, optional but recommended)\n\n## Files to Modify\n- None\n\n## Verification\n- Command: `cat agentcore/mail/repo-location.txt && ( [ -L agentcore/mail/repo ] && readlink agentcore/mail/repo || echo \"repo symlink not created\" ) && ls -la \"$HOME/.mcp_agent_mail_local_repo\" | head`\n- Must be true afterward: pointer file exists; if symlink exists it resolves to the external repo; external repo is readable."
    },
    {
      "title": "Create agentcore tools aliases for coordination scripts",
      "priority": "P0",
      "depends_on": [
        "bd-PH1-001"
      ],
      "description": "## How to Think\nThis is boundary-setting without disruption. The intent is to establish `agentcore/tools/*` as the canonical coordination-script entrypoints while keeping the real scripts in `scripts/` for Phase 1. Preserve all existing invocations by not moving the originals. Stop and escalate if any of the referenced scripts do not exist or if creating the alias would overwrite a real file.\n\n## Acceptance Criteria\n- `agentcore/tools/agent-mail-helper.sh` symlinks to `../../scripts/agent-mail-helper.sh`\n- `agentcore/tools/agent-registry.sh` symlinks to `../../scripts/agent-registry.sh`\n- `agentcore/tools/auto-register-agent.sh` symlinks to `../../scripts/auto-register-agent.sh`\n- `agentcore/tools/monitor-agent-mail-to-terminal.sh` symlinks to `../../scripts/monitor-agent-mail-to-terminal.sh`\n- `agentcore/tools/mail-monitor-ctl.sh` symlinks to `../../scripts/mail-monitor-ctl.sh`\n\n## Files to Create\n- agentcore/tools/agent-mail-helper.sh (symlink)\n- agentcore/tools/agent-registry.sh (symlink)\n- agentcore/tools/auto-register-agent.sh (symlink)\n- agentcore/tools/monitor-agent-mail-to-terminal.sh (symlink)\n- agentcore/tools/mail-monitor-ctl.sh (symlink)\n\n## Files to Modify\n- None\n\n## Verification\n- Command: `for s in agent-mail-helper.sh agent-registry.sh auto-register-agent.sh monitor-agent-mail-to-terminal.sh mail-monitor-ctl.sh; do echo \"== $s\"; ls -la \"agentcore/tools/$s\"; readlink \"agentcore/tools/$s\"; done`\n- Must be true afterward: each alias exists as a symlink pointing to the corresponding file under `scripts/`."
    },
    {
      "title": "Implement Phase 1 verification script suite",
      "priority": "P1",
      "depends_on": [
        "bd-PH1-001",
        "bd-PH1-004",
        "bd-PH1-005",
        "bd-PH1-006",
        "bd-PH1-007",
        "bd-PH1-008",
        "bd-PH1-009"
      ],
      "description": "## How to Think\nThis is the safety net. The intent is defensive verification: assume nothing, verify everything. The scripts should confirm (1) directory skeleton exists, (2) no hidden dirs inside agentcore, (3) required symlinks exist and resolve correctly, (4) external mail repo is reachable, and (5) no symlink loops. Preserve non-disruption: verification must be read-only (no writes except to its own temp output). Stop and escalate if verification reveals mismatches or missing dependencies; do not auto-fix in this bead.\n\n## Acceptance Criteria\n- `agentcore/verify/verify-phase1.sh` exists and exits non-zero on failure.\n- Script checks:\n  - no dot-directories under agentcore\n  - expected symlinks exist and resolve\n  - external mail repo path readable\n  - agentcore/tools aliases exist\n- Output is human-readable and indicates PASS/FAIL per check.\n\n## Files to Create\n- agentcore/verify/verify-phase1.sh\n- agentcore/verify/checks/check-no-dotdirs.sh\n- agentcore/verify/checks/check-symlinks.sh\n- agentcore/verify/checks/check-mail-repo.sh\n\n## Files to Modify\n- None\n\n## Verification\n- Command: `bash agentcore/verify/verify-phase1.sh`\n- Must be true afterward: script runs to completion and reports PASS for all checks on a correctly set up Phase 1 environment."
    },
    {
      "title": "Delete unused capital AgentCore directory",
      "priority": "P0",
      "depends_on": [],
      "description": "## How to Think\nThis is controlled cleanup. The intent is to remove confirmed-unused legacy clutter (`AgentCore/` with capital A) to reduce ambiguity. Preserve safety: only delete after re-verifying it is not referenced by scripts/build tooling and is not needed for git attributes. Stop and escalate if `.gitattributes` inside `AgentCore/` contains rules not present elsewhere or if any tooling references the path.\n\n## Acceptance Criteria\n- `AgentCore/` directory is removed from repo.\n- If it contained `.gitattributes`, either:\n  - it is safely removed because redundant, OR\n  - its rules are migrated to the correct repo-root `.gitattributes` before deletion.\n\n## Files to Create\n- None\n\n## Files to Modify\n- .gitattributes (only if needed to preserve rules)\n\n## Verification\n- Command: `test ! -d AgentCore && echo \"AgentCore/ removed\"; rg -n \"\\bAgentCore/\\b\" -S . || true`\n- Must be true afterward: `AgentCore/` does not exist and ripgrep finds no references in the codebase."
    },
    {
      "title": "Run Phase 1 smoke tests and record results",
      "priority": "P1",
      "depends_on": [
        "bd-PH1-010",
        "bd-PH1-009"
      ],
      "description": "## How to Think\nThis is end-to-end validation. The intent is to prove Phase 1 is non-disruptive: existing tooling still works, and the new agentcore view doesn’t introduce regressions. Preserve current behavior: do not change scripts; only execute them. Stop and escalate if any smoke test fails; capture exact command output and environment details so failures are actionable.\n\n## Acceptance Criteria\n- Phase 1 verification script passes.\n- Mail helper basic commands work (whoami/list/inbox), and sending a test message works if a safe recipient is available.\n- Beads tooling still works (`br` and/or `bv` commands as used in this repo).\n- Results are recorded in a short log file under `agentcore/verify/`.\n\n## Files to Create\n- agentcore/verify/phase1-smoke-results.txt\n\n## Files to Modify\n- None\n\n## Verification\n- Commands:\n  - `bash agentcore/verify/verify-phase1.sh`\n  - `bash scripts/agent-mail-helper.sh whoami`\n  - `bash scripts/agent-mail-helper.sh list || true`\n  - `br list || true`\n  - `bv list || true`\n- Must be true afterward: verification passes; core commands execute without path-related errors; results file exists and includes timestamps and command outputs."
    }
  ],
  "error": null
}
